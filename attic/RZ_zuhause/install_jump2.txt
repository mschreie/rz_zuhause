after minimal-installation of RHEL 7 Server:

jump.example.com


[root@jump /]# subscription-manager register

[root@jump /]# subscription-manager list --available | less -X

[root@jump /]# subscription-manager attach --pool=......

[root@jump /]# subscription-manager repos --list

[root@jump /]# subscription-manager release --set=7Server 


## changed FS-Mountpoints to look like this: (no /home, but /var)

[root@jump /]# df -h
Filesystem             Size  Used Avail Use% Mounted on
/dev/mapper/rhel-root   50G  780M   50G   2% 
/
devtmpfs               7,8G     0  7,8G   0% 
/dev
tmpfs                  7,8G     0  7,8G   0% 
/dev/shm
tmpfs                  7,8G  8,5M  7,8G   1% 
/run
tmpfs                  7,8G     0  7,8G   0% 
/sys/fs/cgroup
/dev/sda1              497M  123M  374M  25% 
/boot
/dev/mapper/rhel-var   100G  185M  100G   1% /var




[root@jump /]# yum install chrony


[root@jump /]# vi /etc/chrony.conf

# Use public servers from the pool.ntp.org project.

# Please consider joining the pool (http://www.pool.ntp.org/join.html).

server 192.168.4.1 iburst

#server 0.rhel.pool.ntp.org iburst

#server 1.rhel.pool.ntp.org iburst

#server 2.rhel.pool.ntp.org iburst

#server 3.rhel.pool.ntp.org iburst



[root@jump /]# systemctl start chrony

[root@jump /]# systemctl enable chronyd



[root@jump /]# firewall-cmd --add-port="53/udp" --add-port="53/tcp" \

>  --add-port="67/udp" --add-port="68/udp" \

>  --add-port="69/udp" --add-port="80/tcp" \

>  --add-port="443/tcp" --add-port="5647/tcp" \

>  --add-port="8140/tcp" \

> && firewall-cmd --permanent --add-port="53/udp" --add-port="53/tcp" \

>  --add-port="67/udp" --add-port="68/udp" \

>  --add-port="69/udp" --add-port="80/tcp" \

>  --add-port="443/tcp" --add-port="5647/tcp" \

>  --add-port="8140/tcp"



[root@jump /]# subscription-manager repos --disable "*"

[root@jump /]# subscription-manager repos --enable rhel-7-server-rpms \

> --enable rhel-server-rhscl-7-rpms \

> --enable rhel-7-server-satellite-6.1-rpms

[root@jump /]# yum update -y

[root@jump /]# yum install katello -y


---
Network: made the second if available:

3: enp5s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP qlen 1000
    link/ether 00:1c:c4:bd:fd:8a brd ff:ff:ff:ff:ff:ff
    
inet 172.16.1.10/24 brd 172.16.1.255 scope global enp5s0
       
	valid_lft forever preferred_lft forever
    
inet6 fe80::21c:c4ff:febd:fd8a/64 scope link 
       
	valid_lft forever preferred_lft forever



[root@jump ~]# katello-installer --capsule-dhcp=true --capsule-dns=true --capsule-tftp=true --capsule-dhcp-interface=enp5s0  --capsule-dns-interface=enp5s0
BETTER would have been (see further down for network config):
[root@jump ~]# katello-installer --capsule-dhcp=true --capsule-dns=true --capsule-tftp=true --capsule-dhcp-interface=vlan20@bond0  --capsule-dns-interface=vlan20@bond0
.. did not suite the facts (output of facter), therefore
[root@jump ~]# katello-installer --capsule-dhcp=true --capsule-dns=true --capsule-tftp=true --capsule-dhcp-interface=vlan20  --capsule-dns-interface=vlan20
even better (to make DNS work aswell:
[root@jump ~]# katello-installer --capsule-dhcp=true --capsule-dns=true --capsule-tftp=true --capsule-dhcp-interface=vlan20  --capsule-dns-interface=vlan20 --capsule-dns-forwarders 172.16.20.1 --capsule-dns-reverse 20.16.172.in-addr.arpa 


Initial credentials are admin / 4ygoyzrTStjmT9D4


Installing             Done                                               [100%] [....................................]
  Success!
  
* Katello is running at https://jump.example.com

      Initial credentials are admin / 4ygoyzrTStjmT9D4
  
* Capsule is running at https://jump.example.com:9090
  
* To install additional capsule on separate machine continue by running:


      capsule-certs-generate --capsule-fqdn "$CAPSULE" --certs-tar "~/$CAPSULE-certs.tar"

  The full log is at /var/log/katello-installer/katello-installer.log






put jump.example.com in 
vi /etc/hosts
edit C:\Windows\System32\drivers\etc\hosts

192.168.4.119	jump.example.com


In the web UI:
Changed admin UI Language to US
Changed admin password
New Organization: schreierinc
  assigned jump.example.com to schreierinc
in Administer->Users->admin
    asigned schreierinc and "default organization" to user admin  
	selected schreierinc as default login 
    asigned "default location" to user admin
	selected default organization as default login

Manifest with 9 employee SKU uploaded

Select Red Hat Repositories
- RHEL 7 Server (RPMs) 7Server
- RH Satellite Tools 6.1
- RH Storage Native Client 

- RHEV Manager 3.6
- RHEV M Agents 

RHEV-M 3.6 not valid subscription 

- Red Hat Gluster Storage 3.1 Console RPMs x86_64 7Server
- Red Hat Gluster Storage 3.1 Nagios RPMs x86_64 7Server  
- Red Hat Gluster Storage 3.1 Server RPMs x86_64 7Server 
- Red Hat Gluster Storage 3.1 Samba for RHEL 7 Server RPMs x86_64 7Server 
- Red Hat Gluster Storage 3.1 NFS RPMs x86_64 7Server 
- Red Hat Gluster Storage 3.1 Splunk RPMs x86_64 7Server 

Kickstart
- Red Hat Enterprise Linux 7 Server Kickstart x86_64 7.2 
ISOs
- Red Hat Enterprise Linux 7 Server ISOs x86_64 7Server 

Red Hat Gluster Storage 3.1 Server ISOs x86_64 7Server => not a valid subscriptions

... not final

Sync Status
-> sync first repos


==========================================
## there are more options to configure dhcp, dns and tftp correctly


## better install options:

# katello-installer --capsule-dns true \

--capsule-dns-interface vlan20 \

--capsule-dns-zone example.com \

--capsule-dns-forwarders 172.16.20.1 \

--capsule-dns-reverse 20.16.172.in-addr.arpa \

--capsule-dhcp true \

--capsule-dhcp-interface vlan20 \

--capsule-dhcp-range "172.16.10.50 172.16.10.99" \

--capsule-dhcp-gateway 172.16.20.1 \

--capsule-dhcp-nameservers 172.16.20.1 \

--capsule-tftp true \

--capsule-tftp-servername $(hostname) \

--capsule-puppet true \

--capsule-puppetca true


## perhaps even better to use "external" services!!!  Chapter 7.9.1


==== moving forard:
- configuring bond (LACP) and tagged VLANs to connect to both switches to mgt and storage network
- make firefox work on this host (run localy, displayed on my notebook)
# yum install -y firefox
# yum install -y xauth 



==== setting up Satellite to deploy servers

Infrastructure=>Domains
changed context to "any organization", "any location" and found example.com 
DNS Domain: example.com 
Description:
DNS-capsule: jump.example.com
Locations: Default Location
Organization: Default Organization

changed context back to "Default Organization", "default location"

Infrastructure=>Subnets
Name: storage
Network address: 172.16.20.0
Network mask 255.255.255.0
Gateway address: 172.16.20.1
Primary DNS server: 172.16.20.1
Secondary DNS server
IPAM: DHCP
Start of IP range: 172.16.20.100
End of IP range: 172.16.20.249
VLAN ID
Boot mode: static

Domains: example.com, select all
Capsules:
DHCP Capsule: jump.example.com
TFTP Capsule: jump.example.com
DNS Capsule: jump.example.com
Discovery Proxy: jump.example.com

Locations: Default Location
Organization: Default Organization


Content->Lifecycle Environment
New Environment Path
Name: PRD
LAbel: PRD
Description: Production for stretched RHEV and stretched  Gluster

Content->Content View
Create:
Name: everything
Label: everything
Description: Trying to keep this simple
Composite View: NO

Yum Content
adding everything
=> Publish new version 
  description: initial create
=> Promote to PRD


Content->Activation Keys
New Activation Key
Name: Gluster
Content Host Limit: unlimited Hosts
Description: try to enable everything necessary for Storage deployment
Environment: PRD
contentview: everything
SAVE

Subscriptions:
Auto-Attach: yes
Employee SKU added

Product Content:
Red Hat Satellite Tools 6.1 (for RHEL 6 Server) => Override to yes
Red Hat Satellite Tools 6.1 (for RHEL 7 Server) => Override to yes
Red Hat STorage NAtive Client For RHEL 7 => Override to yes
Red Hat Gluster Storage Console => Override to yes
Red Hat Gluster Storage 3.1 Samba (for RHEL 7 Server) (RPMs) => Override to Yes
Red Hat Gluster Storage 3.1 Server (RPMs) => Override to Yes
Red Hat Gluster Storage 3.1 NFS (RPMs) => Override to Yes

Host Collections:
no host collections

Hosts->Architecture
Hosts->Hardware Model
Hosts->Installation Media
Hosts->Partition Table
Hosts->Provisioning Templates
 
Changed "Kickstart default PXELinux:
OLD: kernel <%= @kernel %>
NEW: kernel <%= @kernel %> hpsa.hpsa_allow_any=1

Changed "Kickstart default iPXE"
OLD: kernel <%= "#{@host.url_for_boot(:kernel)}" %> ks=<%= foreman_url('provision')%><%= static %> ksdevice=<%= @host.mac %> network kssendmac ip=${netX/ip} netmask=${netX/netmask} gateway=${netX/gateway} dns=${dns}
initrd <%= "#{@host.url_for_boot(:initrd)}" %>

NEW: kernel <%= "#{@host.url_for_boot(:kernel)}" %> hpsa.hpsa_allow_any=1 ks=<%= foreman_url('provision')%><%= static %> ksdevice=<%= @host.mac %> network kssendmac ip=${netX/ip} netmask=${netX/netmask} gateway=${netX/gateway} dns=${dns}
initrd <%= "#{@host.url_for_boot(:initrd)}" %>

Changed "PXELinux global default"
OLD:     kernel <%= profile[:hostgroup].operatingsystem.kernel(profile[:hostgroup].architecture) %>
NEW:     kernel <%= profile[:hostgroup].operatingsystem.kernel(profile[:hostgroup].architecture) %> hpsa.hpsa_allow_any=1

Cloned "Satellite Kickstart Default" 
to     "Satellite Kickstart Default G5" and changed:
OLD: bootloader --append="nofb quiet splash=quiet <%=ks_console%>" <%= grub_pass %>
NEW: bootloader --append="nofb quiet splash=quiet <%=ks_console%> hpsa.hpsa_allow_any=1" <%= grub_pass %>

OLD: bootloader --location=mbr --append="nofb quiet splash=quiet" <%= grub_pass %>
NEW: bootloader --location=mbr --append="nofb quiet splash=quiet hpsa.hpsa_allow_any=1" <%= grub_pass %>


Hosts->Operating System-> RedHat 7.2
Templates:
DEfault values are:
PXELinux:  Kickstart default PXELinux
iPXE:      Kickstart default iPXE
provision: Satellite Kickstart Default
finish:    Satellite Kickstart Default Finish
user_data: Satellite Kickstart Default User Data

changed: 
OLD: provision: Satellite Kickstart Default
NEW: provision: Satellite Kickstart Default G5



Configure-> Host group => New Host Group
Name: storagehosts
Lifecycle Environment: PRD
Content View: everything
Puppet Environment: .. default setting ..
Capsule Settings
Content Source: jump.example.com
Puppet CA: jump.example.com
Puppet Master: jump.example.com

Network:
Domain: example.com
Subnet: storage (172.16.20.0/24)
Realm: 

Operating System:
Architecture: x86_64
Operating system: RedHat 7.2
Media: ..
Partition table: Kickstat default
Root password: schreier1

Activation Keys: gluster

==========
Try to deploy a first host:
Hosts->New Host
Name: gluster12
Organization: Default Organization
Location: Default Location
Host Group: storagehosts
Deploy on: Bare Metal
Lifecycle Environment: PRD
Content View: everything
Puppet Environment *
Capsule Settings
Content Source: jump.example.com
Puppet CA: jump.example.com
Puppet Master: jump.example.com

Network;
Domain: example.com
Realm:
MAC address:
Subnet: storage (172.16.20.0/24)
IP address: 






